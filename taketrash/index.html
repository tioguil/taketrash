<!DOCTYPE html>
<html>
    <head>
	<meta charset="UTF-8">
        <title>TAKE TRASH</title>
        <link rel="icon" type="img/png" href="img/icone.png" />
		<script src="js/sprite.js"></script>
      <!-- <style> canvas{position: absolute;top :0px; bottom: 0px;left: 0px; right: 0px;    margin:auto;  } </style> -->
	  <link rel="stylesheet" href="css/style.css">
		
    </head>

<body>
<div style="float: left">
<p >Contador
<br> de Acessos

</p>

<script type="text/javascript" src="http://counter10.freecounter.ovh/private/countertab.js?c=40c3a8037b9bdf078e19ab0c54d6de3b"></script>

<p>Projeto <br> Interdisciplinar  <br> USJT: Tuma <br>CCO1BN <br>
Grupo: Nil One
<br><br>
<fieldset style="background: #87c680">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="img/mouse.png"> <br>
Play/<br>Jogar Novamente

<br><br><br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="img/teclado.png"> <br>

Controlam a lata
</fieldset>
</p>
</div>
		
    <script>




 //variaveis do jogo

         var canvas, ctx, ALTURA, LARGURA, frames = 0,img,record,alterar = 1,alterar2 = 4; //Variaveis globais
         	
			estado = {
			jogar: 0,
			jogando: 1,
			perdeu: 2
		};     
		var teclas = {};	
		var musicaAcao;
 		carregarMusicas();	
 		
		
//********************************Variavel da Bola******************************************************
        
		var bola= {x0:150, y0:530, v0: (12 +(1 * Math.random())), cor:"red", vx0:0, vy0:0, aceleracao:-15, tempo:0, intervalo:0.02, angulo: (55 + Math.floor(25 * Math.random())) * Math.PI/180,start:1,score: 0,
			 
		  resete: function(){
			this.tempo=0;
			this.vx0=0;
			this.vy0=0;
			this.x0 = 150;
			this.y0 = 530;
			this.v0 = (12 +(1 * Math.random()));
			this.angulo = (55 + Math.floor(25 * Math.random())) * Math.PI/180;

			
		  },
		

          atualiza: function(){
		

				this.vx0 = this.v0 * Math.cos(this.angulo);
				this.vy0 = this.v0 * Math.sin(this.angulo);

          },
		  
		  
		 
		
		

          	tiro: function(){
					this.tempo = this.tempo + this.intervalo;
					this.x0 += this.vx0 * this.tempo;
					this.y0 -= this.vy0 * this.tempo + this.aceleracao * Math.pow(this.tempo, 2) / 2;
					
					
					if ( this.y0 > chao.y -20){
						
						if ( bola.score > record ){
							localStorage.setItem("record", this.score);
							record = bola.score;
						}
						this.resete();
						estadoAtual = estado.perdeu;
						
						
					}
				

          	},


	        desenha1: function(){
	         spritelixo1.desenha(this.x0, this.y0);},
			 
			desenha2: function(){
	         spritelixo2.desenha(this.x0, this.y0);},
			 
			desenha3: function(){
	         spritelixo3.desenha(this.x0, this.y0);},
			 
			desenha4: function(){
	         spritelixo4.desenha(this.x0, this.y0);},
			 
			desenha5: function(){
	         spritelixo5.desenha(this.x0, this.y0);},
	         
	         desenha6: function(){
	         spritelixo6.desenha(this.x0, this.y0);},
	         
	         desenha7: function(){
	         spritelixo7.desenha(this.x0, this.y0);},
	         
	         desenha8: function(){
	         spritelixo8.desenha(this.x0, this.y0);},
	         
	         desenha9: function(){
	         spritelixo9.desenha(this.x0, this.y0);},
	         
	         desenha10: function(){
	         spritelixo10.desenha(this.x0, this.y0);},
	         
	         desenha11: function(){
	         spritelixo11.desenha(this.x0, this.y0);},

          },
	


//***************************Variavel do chão**********************************************************		  
		  
			
			
		 	chao = { y: 569, x: 0, 	altura: 50,

			atualiza: function() {
				this.x += 5;//Velocidade do asfalto
			   if (this.x >= +30)
			 this.x = 0;
			},

			desenha: function() {
				spriteChao.desenha(this.x, this.y);
				spriteChao.desenha(this.x - spriteChao.largura, this.y);
			}
		};

//***************************************************************************************************************
	var bola2= {x0:150, y0:510, v0: 11, cor:"red", vx0:0, vy0:0, aceleracao:-11, tempo:0, intervalo:0.017, angulo: (70 + Math.floor(15 * Math.random())) * Math.PI/180,start:1,
			 
		  resete: function(){
			this.tempo=0;
			this.vx0=0;
			this.vy0=0;
			this.x0 = 150;
			this.y0 = 510;
			this.v0 = 11;
			this.angulo = (70 + Math.floor(11 * Math.random())) * Math.PI/180;

			
		  },
		

          atualiza: function(){
		

				this.vx0 = this.v0 * Math.cos(this.angulo);
				this.vy0 = this.v0 * Math.sin(this.angulo);

          },
		  
		  
		 
		
		

          	tiro: function(){
					this.tempo = this.tempo + this.intervalo;
					this.x0 += this.vx0 * this.tempo;
					this.y0 -= this.vy0 * this.tempo + this.aceleracao * Math.pow(this.tempo, 2) / 2;
					
					
					if ( this.y0 > chao.y -20){
							
						if ( bola.score > record ){
							localStorage.setItem("record", bola.score);
							record = bola.score;
						}
						
						this.resete();
						estadoAtual = estado.perdeu;
						
						
					}
				

          	},
	
			
          	desenha1: function(){
	         spritelixo1.desenha(this.x0, this.y0);},
			 
			desenha2: function(){
	         spritelixo2.desenha(this.x0, this.y0);},
			 
			desenha3: function(){
	         spritelixo3.desenha(this.x0, this.y0);},
			 
			desenha4: function(){
	         spritelixo4.desenha(this.x0, this.y0);},
			 
			desenha5: function(){
	         spritelixo5.desenha(this.x0, this.y0);},

	         desenha6: function(){
	         spritelixo6.desenha(this.x0, this.y0);},
	         
	         desenha7: function(){
	         spritelixo7.desenha(this.x0, this.y0);},
	         
	         desenha8: function(){
	         spritelixo8.desenha(this.x0, this.y0);},
	         
	         desenha9: function(){
	         spritelixo9.desenha(this.x0, this.y0);},
	         
	         desenha10: function(){
	         spritelixo10.desenha(this.x0, this.y0);},
	         
	         desenha11: function(){
	         spritelixo11.desenha(this.x0, this.y0);},

          };

  //*******************************Variavel da do Caminhão ****************************************************

  		var	caminhao = { 
  			x: 25,
			y: 490,
			

			desenha: function() {
				
				spriteBoneco.desenha(this.x, this.y);
				
				
			}
		};
//***********************************Lixo***********************************

  		var	lixo = { 
  			x: 350,
			y: 490,
			speed: 10,

			desenha: function() {
			
					if ( this.x <= bola.x0 + 1 && bola.x0 <= this.x + 40 && this.y <= bola.y0 + 40 ){
						if (alterar < 11){
						alterar++;
						}
						else if( alterar == 11 ){
						alterar = 1;
						}

						bola.resete();
						bola.score++;
						somlixo.play();
						  

						
					}

				spritelata.desenha(this.x, this.y);
				
				},
			
			veri: function() {
					if ( this.x <= bola2.x0 + 1 && bola2.x0 <= this.x + 40 && this.y <= bola2.y0 + 40 ){
						if (alterar2 < 11){
						alterar2++;
						}
						else if( alterar2 == 11 ){
						alterar2 = 1;
						}
						bola2.resete();
						bola.score++;
					}
			}
		};	
		
			

		// function para movimentar a lata
		// Esquerda
		function movebloco() {
			if(37 in teclas && lixo.x > 300)
				lixo.x -= lixo.speed;
		// Direita
			else if(39 in teclas && lixo.x < 925)
				lixo.x += lixo.speed;
		};
		
		document.addEventListener("keydown", function(e) {
			teclas[e.keyCode] = true;
			//alert(e.keyCode);
		}, false);
		
		document.addEventListener("keyup", function(e) {
			delete teclas[e.keyCode];
		}, false);


//********************************Som Do jogo***************************************

function carregarMusicas() {
         musicaAcao = new Audio();
         musicaAcao.src = 'snd/fundo.m4a';
         musicaAcao.load();
         musicaAcao.volume = 0.2;
         musicaAcao.loop = true;
      }
      	fim = new Audio();
		fim.src = 'snd/gamer_over.wav';
		fim.volume = 0.3;
		fim.loop = 0;
		
		somlixo = new Audio();
		somlixo.src = 'snd/lixo.wav';
		somlixo.volume = 1;
		somlixo.loop = 0;

      
//********************************Func Adicionais***************************************

 function clique(event) {
 	
	if ( estadoAtual == estado.jogar){
		estadoAtual = estado.jogando;
		musicaAcao.play();

		   
	}
	
	else if( estadoAtual == estado.perdeu){
		bola.score = 0;
		estadoAtual = estado.jogar;
		
	}
	
	
      
 }

//*****************************************Func MAIN************************************************************************************ 
 
 function main() {

  ALTURA = window.innerHeight;
  LARGURA = window.innerWidth;

  if(LARGURA >= 500){
           LARGURA = 1024;
           ALTURA = 650;
    

  }
 
   canvas = document.createElement("canvas");
   canvas.width = LARGURA;
   canvas.height = ALTURA;
   canvas.style.border = "1px solid #000";

    
    ctx =  canvas.getContext("2d");
    document.body.appendChild(canvas);
    
    document.addEventListener("mousedown", clique);
	
	img = new Image();
	img.src = "img/figura1.png";

	estadoAtual = estado.jogar;
	
	record = localStorage.getItem("record");
	if ( record == null){
		record = 0;
	}
	
    roda();

 }

 //*****************************************************************************************************************************    
    function roda () {
        atualiza();
        desenha();

     window.requestAnimationFrame(roda);


    }
    //***************************************************************************************************************************** 
    
    function atualiza () {
        frames++;
       
	   if ( estadoAtual == estado.jogando ){
			bola.atualiza();
			bola.tiro();
			chao.atualiza();
			if ( bola.score >= 30){
				bola2.atualiza();
				bola2.tiro();
			}
		}
    }

    //***************************************************************************************************************************** 
    
    function  desenha() {
	  bg.desenha (0, 0)
	  chao.desenha();
	  movebloco();
	  
	  		ctx.fillStyle = "#fff";
			ctx.font = "50px Arial";
			ctx.fillText(bola.score, 30, 68);
			
	  		if ( estadoAtual == estado.jogar ){
			//ctx.fillStyle = "green";
			//ctx.fillRect(LARGURA / 2 - 50, ALTURA / 2 - 50, 100, 100);
			spritemenu.desenha(LARGURA / 2 - 200, ALTURA / 2 - 225);
		}
		
		else if( estadoAtual == estado.perdeu){
				bola.resete();
				bola2.resete();
				

			spriteRecord.desenha(LARGURA / 2 - 200, ALTURA / 2 - 225);
			
				ctx.fillStyle = "#fff";
				ctx.fillText(record, LARGURA / 2 -10, ALTURA / 2 + 93);
				
				ctx.fillStyle = "#fff";
				ctx.fillText(bola.score, LARGURA / 2 -40 , ALTURA / 2 + 20);

				musicaAcao.pause();
        	    musicaAcao.currentTime = 0.0;
        	    

        	   




		}
		
		else if( estadoAtual == estado.jogando){
			if (alterar == 1){
			bola.desenha1();
			}
		else if( alterar == 2) {
			bola.desenha2();
		}
		else if( alterar == 3) {
			bola.desenha3();
		}
		else if( alterar == 4) {
			bola.desenha4();
		}
		else if( alterar == 5) {
			bola.desenha5();
		}
		else if( alterar == 6) {
			bola.desenha6();
		}
		else if( alterar == 7) {
			bola.desenha7();
		}
		else if( alterar == 8) {
			bola.desenha8();
		}
		else if( alterar == 9) {
			bola.desenha9();
		}
		else if( alterar == 10) {
			bola.desenha10();
		}
		else if( alterar == 11) {
			bola.desenha11();
		}
			if (alterar2 == 1){
			bola2.desenha1();
			}
		else if( alterar2 == 2) {
			bola2.desenha2();
		}
		else if( alterar2 == 3) {
			bola2.desenha3();
		}
		else if( alterar2 == 4) {
			bola2.desenha4();
		}
		else if( alterar2 == 5) {
			bola2.desenha5();
		}
		else if( alterar2 == 6) {
			bola2.desenha6();
		}
		else if( alterar2 == 7) {
			bola2.desenha7();
		}
		else if( alterar2 == 8) {
			bola2.desenha8();
		}
		else if( alterar2 == 9) {
			bola2.desenha9();
		}
		else if( alterar2 == 10) {
			bola2.desenha10();
		}
		else if( alterar2 == 11) {
			bola2.desenha11();
		}
			caminhao.desenha();
			lixo.desenha();
			lixo.veri();
			
		}

      
      

    } 

     //inicializa  o jogo


    
    main();

</script>


		



</body>﻿
</html>